{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"docs/","title":"Welcome to Pitt Sailbot!","text":"<p>Howdy! This is the Control Team's documentation site for everything related to the software and electrical design of our autonomous sailboat.</p>"},{"location":"docs/#contributing","title":"Contributing","text":"<p>Want to contribute? Check out our Getting Started Guide for step-by-step instructions on setting up your environment.</p>"},{"location":"docs/#resources","title":"Resources","text":"<p>Looking for commonly used commands or tools? Visit the Resources tab for quick access to essential information.</p>"},{"location":"docs/Code%20Overview/","title":"Code Overview","text":"<p>This is a run-down of what our code does. The project repo may look daunting, but half of it is just configurations and boilerplate. I promise its not as complicated as it looks!</p>"},{"location":"docs/Code%20Overview/#ros2","title":"ROS2","text":"<p>The core of our boat runs on ROS2. This is standard for most robotics applications in industry.</p>"},{"location":"docs/Code%20Overview/#why-ros","title":"Why ROS?","text":"<p>ROS provides many benefits:</p> <ul> <li>It handles the parallelization of code, which means you can utilize your entire CPU.</li> <li>It makes code independent. This lets you test individual nodes and scale easier.</li> <li>It standardizes how code communicates. This lets you swap out a sensor or rewrite code without causing bugs in other parts of the code.</li> <li>And it provides a lot of supporting libraries</li> </ul>"},{"location":"docs/Code%20Overview/#what-is-ros","title":"What is ROS?","text":"<p>The foundation of ROS relies on a network of independent Nodes. These often represent a physical sensor or motor, but they also apply to anything you would write a <code>Class</code> or <code>Object</code> for.</p> <p>To communicate between nodes, ROS uses topics. This is essentially like a group chat where nodes can talk on  or listen to messages from other nodes. To speak on a topic, you create a publisher. Then, you can write whatever messages you want to a topic. To listen to a topic, you create a subscriber. Any messages that are published onto a topic are broadcasted to ALL subscribers listening on that topic. It's important that each topic uses a single standard message type, like a String, Float32, or a custom message type you define.</p> <p>Whenever a message is broadcasted, the subscribers will run a callback function. A callback function is just  a function that is executed whenever a specific event happens. For example, pressing the 'A' key on a keyboard might run  <code>a_pressed_callback()</code>, which would execute whatever code is defined in the function. ROS also uses callbacks for when  a certain time has passed, called timers. This is useful for setting up sensors to publish data every so often.</p> <p>Contextualizing ROS:</p> <ul> <li>Each Node is like a user</li> <li>All Nodes can join specfic 'group chats' called topics, which are identified by a topic name like \"/sensors/windvane/angle\"</li> <li>Nodes can send and receive messages on that topic, following the same language as defined in the message type</li> <li>Whenever a message is received by a Node, it executes a defined callback function</li> </ul>"},{"location":"docs/Code%20Overview/#sensorscontrols","title":"Sensors/Controls","text":"<p>Scripts which interface with the mechanical parts of the boat. Virtual versions of each sensor exist for debugging with fake values.</p> <ul> <li>GPS - boat position</li> <li>compass - boat heading</li> <li>windvane - wind direction</li> <li>camera - RGB optical camera</li> <li>cameraServos - pitch and yaw servos controlling camera movement</li> <li>boatMovement - rudder/sail controls and controlling the boat's movement</li> <li>Odrive - motors used in rudder and sail control</li> <li>transceiver - wireless communication to shore</li> </ul>"},{"location":"docs/Code%20Overview/#utils","title":"Utils","text":"<p>Miscellaneous functions used by the boat</p> <ul> <li>constants - config containing all static parameters used by the boat</li> <li>utils - commonly used functions for anything</li> <li>boatMath - common functions for working with coordinates and angles</li> <li>eventUtils - common functions used in events</li> <li>objectDetection - AI buoy detection from an image</li> </ul>"},{"location":"docs/Code%20Overview/#debug","title":"Debug","text":"<p>Scripts used to test boat behavior</p> <ul> <li>boatSim - simulates how the boat moves in a virtual environment</li> </ul>"},{"location":"docs/Electronics%20Datasheets/","title":"Electronics Datasheets","text":""},{"location":"docs/Electronics%20Datasheets/#microcontroller","title":"Microcontroller","text":""},{"location":"docs/Electronics%20Datasheets/#teensy-41","title":"Teensy 4.1","text":""},{"location":"docs/Electronics%20Datasheets/#pico-2","title":"Pico 2","text":""},{"location":"docs/Electronics%20Datasheets/#cytron-2350-motion-pro","title":"Cytron 2350 Motion Pro","text":""},{"location":"docs/Electronics%20Datasheets/#sbc","title":"SBC","text":""},{"location":"docs/Electronics%20Datasheets/#pi5","title":"Pi5","text":"<p>GPIO Pinout - https://pinout.xyz/pinout/pin5_gpio3/</p>"},{"location":"docs/Electronics%20Datasheets/#imu","title":"IMU","text":""},{"location":"docs/Electronics%20Datasheets/#bno055","title":"BNO055","text":""},{"location":"docs/Electronics%20Datasheets/#lsm6ds","title":"LSM6DS","text":""},{"location":"docs/Electronics%20Datasheets/#gps","title":"GPS","text":""},{"location":"docs/Electronics%20Datasheets/#pa1010d","title":"PA1010D","text":""},{"location":"docs/Electronics%20Datasheets/#pa1616d","title":"PA1616D","text":""},{"location":"docs/Electronics%20Datasheets/#transceiver","title":"Transceiver","text":""},{"location":"docs/Electronics%20Datasheets/#frsky-x9-lite","title":"FRSKY X9 Lite","text":""},{"location":"docs/Electronics%20Datasheets/#servos","title":"Servos","text":""},{"location":"docs/Electronics%20Datasheets/#dan-marina-sails","title":"Dan Marina Sails","text":""},{"location":"docs/Electronics%20Datasheets/#dan-marina-rudder","title":"Dan Marina Rudder","text":""},{"location":"docs/Electronics%20Datasheets/#mini-boat-sails","title":"Mini Boat Sails","text":""},{"location":"docs/Electronics%20Datasheets/#mini-boat-rudder","title":"Mini Boat Rudder","text":""},{"location":"docs/Electronics%20Diagram/","title":"Electronics Diagram","text":"<p>This is an overview of the main electronics we have on the boat and how they are connected to each other.</p> <p>Note: Some things are subject to change and may not be immediately updated in the diagram. Additionally, many lower level components and software protocols are obscured for clarity.</p> <p></p>"},{"location":"docs/Electronics%20Diagram/#wire-color-guide","title":"Wire Color Guide","text":"<p>Guideline for what color our wires mean. This is not absolute. Always check the wire ends/schematic and test with a multimeter. Some things like using red for voltage and black for ground should ALWAYS be followed whereas SDA/SCL are more flexible.</p> Color Meaning RED Power (VCC) BLACK GROUND YELLOW PWM/GPIO WHITE PWM/GPIO GREEN SDA/GPIO PURPLE/BLUE SCL/GPIO"},{"location":"docs/Getting%20Started/","title":"Getting Started","text":"<p>This guide walks you through all the steps to get started with contributing to Sailbot! :D</p>"},{"location":"docs/Getting%20Started/#tech-stack","title":"Tech Stack","text":"<p>We use a few different languages and frameworks for our sailboat. The codebase is split between a high-level navigation stack that is written in Python and low-level C++ drivers for interacting with sensors/servos on our microcontroller. </p> <p>You do not need to install everything here. Our code is fairly modularized so you can contribute to one part of the codebase without having to worry about knowing everything.</p>"},{"location":"docs/Getting%20Started/#dev-environment","title":"Dev Environment:","text":"<ul> <li>VS Code - Strongly preferred code editor. Works with all programming languages and has very helpful extensions.</li> <li>Git/Github - Source control for collaborating.</li> </ul>"},{"location":"docs/Getting%20Started/#high-level-navigation","title":"High-Level Navigation:","text":"<ul> <li>Python - Autonomy code; everything running on the Pi.</li> <li>Docker - Isolated environment for testing and running our code. This is so we don't have to worry about \"it works on my computer\".</li> <li>ROS2 - Handles parallelization and message serialization which helps us build independent 'modules'</li> <li>TailScale - Allows us to remotely access the Pi from almost anywhere in the world (as long as its connected to the internet)</li> </ul>"},{"location":"docs/Getting%20Started/#low-level-embedded-sensorcontrols","title":"Low-Level Embedded Sensor/Controls:","text":"<ul> <li>C++ - Sensor reading code; everything running on our microcontroller.</li> <li>PlatformIO - Used to upload to our microcontroller. Similar to ArduinoIDE but much better at handling large-projects.</li> <li>Protobuf - Used to serialize/deserialize data so we can communicate between the microcontroller &amp; Pi</li> </ul>"},{"location":"docs/Getting%20Started/#table-of-contents","title":"Table of contents","text":"<ol> <li>Install Development Environment<ul> <li>VSCode</li> <li>Git</li> </ul> </li> <li>Set up Repository</li> <li>Install Dependencies    - High-level    - Low-level</li> <li>Testing our Environment</li> </ol>"},{"location":"docs/Getting%20Started/#1-install-development-environment","title":"1. Install Development Environment","text":""},{"location":"docs/Getting%20Started/#1a-installing-git-using-github","title":"1a. Installing Git &amp; Using Github","text":"<p>Git is the industry standard for collaborating on projects. It allows multiple people to work on different features and easily share changes. If you're majoring in CS you'll be forced to learn this eventually, and its a great time to get a head start for your classes.</p> <p>1. Install Git</p> <p>Don't know git? Learn here. Need a refresher instead? Here's a cheat sheet.</p> <p>2. Navigate over to Github. If you don't have an account, create one! Using Github early on is great for saving your progress on projects.</p>"},{"location":"docs/Getting%20Started/#1b-installing-vscode","title":"1b. Installing VSCode","text":"<p>VS Code is an incredibly strong and lightweight editor that works for almost all programming languages. Even if you prefer another IDE, I still recommend you install VS Code since it will be used in most classes and it has helpful extensions to streamline development.</p> <p>1. Download and install VSCode</p>"},{"location":"docs/Getting%20Started/#2-set-up-repository","title":"2. Set Up Repository","text":"<p>1. Open VSCode. In the welcome page, under Start, click 'Clone Git Repository' and enter our repository link <code>https://github.com/PittSailbot/Sailbot.git</code></p> <p>This will install our main repository which runs the code for our robot. We also have a few other repositories which can be found here. These include: - Sailnet GUI   - Flutter based GUI to make it easier to interact/debug with the boat - Simulator   - Python/Matplotlib navigation simulator - Our main page &amp; documentation website   - Raw HTML &amp; mkdocs website - RFID Door Opener   - Arduino code to handle accessing our club room</p>"},{"location":"docs/Getting%20Started/#3-install-dependencies","title":"3. Install Dependencies","text":"<p>Depending on what you work on, you do not need to install everything listed here. Our low and high-level code are both fairly independent and can be tested individually.</p>"},{"location":"docs/Getting%20Started/#3a-high-level","title":"3a. High-Level","text":"<p>If you plan on writing event code, changing our navigation behavior, etc.</p>"},{"location":"docs/Getting%20Started/#install-python","title":"Install Python","text":"<p>Pretty much everything we write on the Pi is using Python. Its easy to pick up and it has good supporting libraries for working with the Raspberry Pi.</p> <p>1. Install Python 3.11</p> <ul> <li>Downloads are at the bottom of the page. You'll want to download either Windows 64-bit or macOS.</li> </ul> <p>Never used Python before? It's ok! If you're taking CS 0010/CMPINF 0010 you'll get to learn in your classes. If not, here's some resources to learn some of the basics if you're willing to put in the time.</p> <p>Or, if you just need a refresher or want to see some cool advanced features check this Python cheat sheet.</p>"},{"location":"docs/Getting%20Started/#install-docker","title":"Install Docker","text":"<p>Docker is used for setting up containers for our code. It's essentially a recipe to build the OS, and all other dependencies necessary to run your code so we can avoid the issue of \"well it works on my machine...\".</p> <p>We'll be using Docker for testing and running our robot code. Using docker containers is incredibly useful since it is easy to set up and its hardware agnostic. On the lake, water and electronics don't mix well, and if we have to unexpectedly switch to another Pi, we can get the code running in just 15 minutes.</p> <p>2. Install Docker</p> <p>3. In VSCode, Press Ctrl + Shift + P to pull up VS Code's search and enter \"Extensions: Install Extensions\".</p> <p>4. Search for and install the 'Dev Container' extension</p> <p>5. Press Ctrl + Shift + P and enter \"Dev Containers: Rebuild and Reopen in Container\"</p> <ul> <li>This step will take a while to install the rest of our dependencies, but it gives us a reliable environment to develop in</li> </ul>"},{"location":"docs/Getting%20Started/#testing-our-environment","title":"Testing our Environment","text":"<p>We're almost there! Now that we have a docker container running, we can compile and run our code in a Linux environment. Docker already builds the correct versions of Ubuntu, ROS2 and all other dependencies so there is very little setup!</p> <p>6. In the new VSCode dev container terminal, enter:</p> <pre><code>. compileDocker.sh\n</code></pre> <ul> <li>Every time you change the source, code you'll run this bash file to compile the changes.</li> </ul> <p>7. Lastly, we can run any of the ROS2 nodes like so:</p> <pre><code>ros2 run sailbot transceiver\n</code></pre> <ul> <li>This should fail with the following exception <code>Exception: No connected devices found</code>. That's ok, because our computer doesn't have an RC transceiver!</li> </ul> <p>Many features in the code will not work since our virtual environment is lacking real sensors and peripherals that the boat has. However, the Docker is very useful for ensuring that your code compiles with ROS2. This lets us to debug compiler errors without having to set the boat up first. Individual nodes can be ran with <code>ros2 run sailbot [node]</code>. You can view all of our robot's nodes with <code>ros2 node list</code></p>"},{"location":"docs/Getting%20Started/#3b-low-level","title":"3b. Low-Level","text":"<p>If you plan on interacting with the PCB, different sensors and motors to control the boat.</p>"},{"location":"docs/Getting%20Started/#platformio","title":"PlatformIO","text":"<p>PlatformIO simplifies using different microcontrollers and is much more scalable than ArduinoIDE. However, ArduinoIDE can still be useful for testing code independently from the rest of the codebase. 1. In VSCode install the PlatformIO extension</p>"},{"location":"docs/Getting%20Started/#install-microcontroller-drivers","title":"Install Microcontroller Drivers","text":"<p>For whatever reason, the Pico2 doesn't work with the default Windows drivers. If you're using the Teensy, or some other microcontroller then this step isn't necessary.</p> <ol> <li>Install Zadig</li> <li>Plug in the Pico2 to your laptop over USB</li> <li>Run Zadig as administrator</li> <li>In Zadig, toggle <code>Options &gt; List all Devices</code></li> <li>In the dropdown, select <code>Pico2</code></li> <li>Press <code>Replace Driver</code></li> </ol>"},{"location":"docs/Getting%20Started/#testing-our-environment_1","title":"Testing our Environment","text":"<p>Now with PlatformIO, we can upload and monitor code running on the microcontroller.</p> <ol> <li>Open the PlatformIO extension in the sidebar</li> <li>Plug in the Pico2 to your laptop while holding down the BOOTSEL button</li> <li>Click 'Upload and Monitor'    - This can be finnicky on the Pico2. You may need to press the BOOTSEL button or replug the USB.</li> </ol>"},{"location":"docs/Getting%20Started/#arduino-ide","title":"Arduino IDE","text":"<p>We use PlatformIO for production, but ArduinoIDE can be useful for testing individual files. </p> <ol> <li>Install ArduinoIDE</li> </ol> <p>By default, our boards aren't supported so to add them in Arduino IDE: 2. Go to File &gt; Preferences 3. Add the board under \"Additional boards manager URLs:\"    - Teensy https://www.pjrc.com/teensy/package_teensy_index.json    - Pico 2 https://github.com/earlephilhower/arduino-pico/releases/download/global/package_rp2040_index.json You can add multiple boards by adding a comma to separate URLs (no spaces)</p>"},{"location":"docs/Getting%20Started/#learning-our-code","title":"Learning our Code","text":"<p>We have the code for the boat and can run it locally, great! But what exactly do these dozens of files do?</p> <p></p> <p>Next up, we'll dive into our project structure and tooling in our Code Overview</p>"},{"location":"docs/Github%20Cheat%20Sheet/","title":"Enable/disable pre-commit hooks","text":"<p>Pre-commit hooks help keep the codebase consistent by auto-formatting with black and isort whenever you commit.  The goal is to reduce git diffs so that comparing histories is much easier, but pre-commit hooks can get in the way when merging/rebasing. I recommend only disabling when you really need to, to prevent 'catch-up' styling commits.</p> <ul> <li>Enable with <code>pre-commmit install</code></li> <li>Disable with <code>pre-commit uninstall</code></li> </ul>"},{"location":"docs/Github%20Cheat%20Sheet/#splitting-up-a-commit-in-a-branch","title":"Splitting up a commit in a branch","text":"<p>Use case: You combined unrelated changes into the same commit and want to split them for readability or reducing diffs</p> <ol> <li>Checkout the branch that you want to modify (e.g. pj/feature)</li> <li>Start an interactive rebase which includes your commit. - At a minimum, git rebase -i commit^ will start the rebase at the commit you want to split - You can also rebase the whole branch, which I usually do to split all target commits in one go</li> <li>Mark the commit(s) that you want to split with edit</li> <li>When git presents the commit that you want to split:<ol> <li>Reset state to the previous commit using git reset HEAD^</li> <li>Use git add to carefully and incrementally add changes to the index</li> <li>Run git commit when you have a set of atomic changes that you are ready to commit</li> <li>Repeat the git add and git commit process until you have processed each set of changes represented by the commit</li> </ol> </li> <li>Run git rebase --continue to resume or finish the rebase</li> </ol>"},{"location":"docs/Github%20Workshop/","title":"Workshop","text":""},{"location":"docs/Github%20Workshop/#topics","title":"Topics","text":"<ul> <li>version control, conceptually</li> <li>branching</li> <li>committing &amp; pushing to GitHub</li> <li>undoing changes</li> </ul>"},{"location":"docs/Github%20Workshop/#version-control-with-git-and-github","title":"Version Control with <code>git</code> and GitHub","text":"<p>As code became, more and more, a large commercial endeavour with many contributors across different teams, cities, and timezones, the process of tracking versions of software became non-trivial.</p>"},{"location":"docs/Github%20Workshop/#enter-the-vcs","title":"Enter the VCS","text":"<p>A version control system, or VCS, tracks the history of changes as people and teams collaborate on projects together. As the project evolves, teams can run tests, fix bugs, and contribute new code with the confidence that any version can be recovered at any time. Developers can review project history to find out:</p> <ul> <li>Which changes were made?</li> <li>Who made the changes?</li> <li>When were the changes made?</li> <li>Why were changes needed?</li> </ul>"},{"location":"docs/Github%20Workshop/#diversion-what-actually-is-a-repository","title":"Diversion: what actually is a repository?","text":"<p>A repository is usually used to organize a single project. Repositories can contain folders and files, images, videos, spreadsheets, and data sets \u2013 anything your project needs. GitHub makes it easy to add a README and other files, such as licenses and codes of conduct. </p> <p>So, you know how you can use <code>ls</code> with the <code>-a</code> flag to print all the files, even the hidden ones? Let's do that here; it'll reveal something cool. If you do <code>ls -a</code>, you'll see two files you didn't know were there: <code>.git</code> and <code>.gitignore</code>.</p> <p><code>.gitignore</code> is a file where you can specify files for <code>git</code> to, well, ignore. Things like sensitive passwords or databases, you don't want to put up on GitHub for everyone to see, so this lets you quickly tell <code>git</code> to not save anything you don't want it to.</p> <p><code>.git</code> is much deeper, though: it's where the repository actually lives. <code>.git</code> is actually a directory which contains information about the repository and a list of every change you've ever made in the repository. Every time you tell <code>git</code> to save your work, it'll track everything you've altered, removed, or added to the repository in that <code>.git</code> folder. That way, if you ever want to revert back to a previous change, you can do so. And, additionally, anyone who can see your repository can look at how your code has changed and developed over time.</p>"},{"location":"docs/Github%20Workshop/#git-workshop","title":"Git Workshop","text":"<p>If git isn't already installed, install it here! Make sure you have a Github account too!</p> <p>We should have the Sailbot repo already set up. If not, follow the steps in Getting Started. Open the project in Pycharm.</p>"},{"location":"docs/Github%20Workshop/#making-our-branch","title":"Making our branch","text":"<p>Branches in <code>git</code> are versions of your project that you separate from the original branch, which is called <code>main</code>. Ours is called <code>main</code> because we made the repository on GitHub. But, if you make a repo through <code>git</code> itself, the original branch will be called <code>master</code>. You might hear someone refer to an original branch as <code>master</code>, so just remember that they both sorta refer to the same thing.</p> <p>We're going to be making our own branch to work on changes. Within Pycharm, click on the Sailbot&gt;main tab at the top right (its got a lil tree next to it). Click new branch and name it after yourself or preferably the issue you're working on (if applicable). </p> <p>Alternatively, in the terminal, you can create a new branch with the command <code>git checkout</code>, using the <code>-b</code> flag, which (you guessed it) stands for \"branch\".</p> <p>Note: if git asked you to login with your GitHub username and a token, check out this guide on making a token. If you do need to do so, the only box you need to check is <code>repo</code>; you can ignore the rest.</p> <p>Lets confirm that our branch was created. Go to the Sailbot repo and check to make sure that your branch was created. If so, great! If not, let me know.</p>"},{"location":"docs/Github%20Workshop/#lets-mess-around","title":"Lets mess around","text":"<p>Take a look around our repository. Pretty nifty right? Lots of the files in /Sailbot are config files and boilerplate for ROS and automated testing. We won't have to worry about any of that right now.</p> <p>For now, lets cause some chaos. Add any files you want or make random changes. We'll be undoing all of these later so don't worry!</p>"},{"location":"docs/Github%20Workshop/#commiting-your-work","title":"Commiting your work","text":"<p>You tell <code>git</code> to save your work by using the command <code>git commit</code>. Committing is like hitting \"Save\" on a Word document, but it's a little more intentional than that; because you have to specifically tell <code>git</code> why you're saving, a commit is a human-meaningful amount of work. </p> <p>At the top left of Pycharm look for a lil -o- symbol. This tracks all of our local changes. Pycharm has a cool feature to group specific changes into Changelists. This is especially helpful when working on multiple parts of the codebase at once. Instead of publishing all of our changes, we can cherry pick which changes we want to push and have relevant commit messages for each.</p> <p>Alternatively, in the terminal run <code>git add .</code> to add any untracked files and <code>git commit -m \"my first commit\"</code>. The <code>-m</code> flag stands for message, and that's how you tell <code>git</code> and, by extension, anyone who looks at your repository, what you did for this commit. </p>"},{"location":"docs/Github%20Workshop/#publishing-our-work","title":"Publishing our work","text":"<p>Now that we've made all the changes we need, lets push them to our branch. Make sure you're in your own branch for this (but it won't nuke anything if you aren't). </p> <p>In Pycharm's commit tab, checkmark all of the files you'd like to commit. At the bottom write in your commit message. In real commits, try to summarize all of the changes you'd made with a bulleted list.</p> <p>After writing your commit message, hit commit and publish. </p> <p>Alternatively, in the terminal run <code>git push</code></p>"},{"location":"docs/Github%20Workshop/#oh-shit-wheres-the-undo","title":"Oh shit! Where's the undo?","text":"<p>No one is immune to the \"oh shit\" moments that happen when pushing code. Sometimes we catch a bug the second it goes live, sometimes we accidentally nuke the repo. It happens. But unlike numbering and saving versions of your code locally. 99% of the time we can recover. That's what git is for.</p> <p>In Pycharm, hit the little tree in the bottom left corner. This will show our entire version history. Right now, you should see the commit you just pushed at the top of the list.</p> <p>There are many ways we can revert this progress. In Pycharm, there are three main ways we can 'undo' this commit.  - <code>undo</code> (only works on non pushed commits) will unstage the files and return the changes to your local copy. - <code>revert</code> will make create another commit, undoing the changes you've made.  - <code>drop</code> will delete the commit from the git history like it was never pushed in the first place.</p> <p>For now lets drop the commit. Our branch should be identical to main now.</p>"},{"location":"docs/How%20to%20Edit%20This%20Site/","title":"How to Edit This Site","text":"<p>Our site uses separate frameworks for our main landing page and documentation site. pittsailbot.github.io is built using static HTML/JS/CSS and our documentation is built with mkdocs. This provides flexibility for our web-design and ease-of-use for writing documentation.</p> <p>Why static and not React/Svelte/X framework? - Our site is not complicated - Pure html minimizes dependencies</p> <p>Documentation is written in markdown and published through Github pages using mkdocs. If you're unfamiliar with using markdown, check out this handy cheat sheet.</p> <p>In depth documentation for mkdocs can be found here.</p> <ul> <li>Google Analytics for our site can also be viewed here</li> </ul>"},{"location":"docs/How%20to%20Edit%20This%20Site/#install-dependencies","title":"Install dependencies","text":"<ol> <li>In the terminal, install dependencies with:</li> </ol> <pre><code>pip install -r requirements.txt\n</code></pre>"},{"location":"docs/How%20to%20Edit%20This%20Site/#making-changes","title":"Making changes","text":"<p>Our documentation is written in markdown and is organized into pages by <code>mkdocs.yml</code>. The main site is a combination of html and css.</p> <ul> <li> <p>For editing any pre-existing .md files, changes will be updated automatically</p> </li> <li> <p>If you are adding any new files, then add the file under the <code>mkdocs.yml</code>'s nav config like so:</p> </li> </ul> <pre><code>nav:\n   - Getting Started: \"Getting Started.md\"\n</code></pre> <p>This will make the file \"Getting Started.md\" visible on the web page's index</p>"},{"location":"docs/How%20to%20Edit%20This%20Site/#previewing-changes","title":"Previewing changes","text":"<p>To preview the documentation site before pushing changes to github:</p> <ol> <li>In the terminal, run:</li> </ol> <pre><code>mkdocs serve\n</code></pre> <ol> <li>In any web browser navigate to 127.0.0.1:8000</li> </ol>"},{"location":"docs/Learning%20Git/","title":"Learning Git","text":"<p>Git is an essential, but often under-taught skill at Pitt. Below are some helpful tutorials for learning how to use Git:</p>"},{"location":"docs/Learning%20Git/#tutorials","title":"Tutorials","text":"<ul> <li>Oh My Git is an interactive game to learn the basic and advanced features of Git</li> </ul>"},{"location":"docs/ROS2/","title":"What is ROS2?","text":""},{"location":"docs/ROS2/#understanding-publisherssubscribers","title":"Understanding Publishers/Subscribers","text":""},{"location":"docs/ROS2/#understanding-topicsservicesactions","title":"Understanding Topics/Services/Actions","text":"<p>https://docs.ros.org/en/foxy/How-To-Guides/Topics-Services-Actions.html</p> <p>Topic - A continuous stream of published data, which any node can subscribe to. </p> <ul> <li>ex. RC, GPS, IMU, Windvane sensor states</li> </ul> <p>Service - A request for data from a node. Good for infrequently used data that does not need to be constantly published. Must be fast to receive data, since it will block the robot until the data is received.</p> <ul> <li>ex. getting the current rudder/sail angle, getting the current camera servo angles, </li> </ul> <p>Action - A request for the robot to do a goal or 'real-world thing' that takes time. The action node should publish 'feedback' to the caller (ex. the delta from where it is, to where it wants to be). Crucially, actions can be stopped mid-process. This is imporant for if our goal changes.</p> <ul> <li>ex. setting the rudder/sail, setting a target heading for the boat, setting a GPS point to navigate to, completing an event</li> </ul>"},{"location":"docs/ROS2/#official-documentation","title":"Official Documentation","text":"<p>https://docs.ros2.org/latest/api/rclpy/api.html https://docs.ros.org/en/humble/</p>"},{"location":"docs/ROS2/#helpful-examples","title":"Helpful examples","text":"<p>Blog: https://roboticsbackend.com/category/ros2/</p> <p>Video: https://www.youtube.com/@RoboticsBackEnd/playlists</p>"},{"location":"docs/ROS2/#interactive-course","title":"Interactive Course","text":"<p>https://app.theconstructsim.com/</p>"},{"location":"docs/ROS2/#common-shell-commands","title":"Common Shell Commands","text":"<p>Publish to a topic <code>ros2 topic pub --once boat/cmd_rudder std_msgs/Float32 \"{data: 30.0}\"</code></p> <p>Run with file args <code>ros2 run sailbot dummyevent --ros-args --params-file ./config/params_eventDefaults.yaml</code></p> <p>Run with commandline args <code>ros2 launch sailbot event_launch.launch.py executable:=dummyEvent</code></p>"},{"location":"docs/Resources/","title":"Resources","text":"<p>Tutorials, cheat sheets and information for everything we use to develop our sailbot.</p>"},{"location":"docs/Sailing%20For%20Land%20Lubbers/","title":"How to Sail","text":"<p>TODO: tbh I've sailed like twice idk how to explain...</p> <p>but look at this cool graph</p>"},{"location":"docs/Sailing%20For%20Land%20Lubbers/#how-to-sail","title":"How to Sail","text":""},{"location":"docs/Sailing%20For%20Land%20Lubbers/#tldr","title":"TLDR","text":"<ul> <li>Boat can't sail straight upwind, so you must sail diagonally and swap sides to zig-zag where you want to go</li> </ul> <p>When tacking (upwind):</p> <ul> <li>Sail all the way in</li> <li>Rudder left/right</li> </ul> <p>When downind:</p> <ul> <li>Sail out</li> </ul>"},{"location":"docs/Shell%20Commands/","title":"Shell Commands","text":"Command Description Example ssh (ip) Used to remotely connect to a device with a known ip ssh pi@192.168.1.1 cd (path) Changes the current directory cd /home/pi/Downloads cd ../ Moves to the parent folder cd - Return to the last cd (helpful for switching between two paths) ls Lists all files in the current directory nano Text editor for various files nano main.py clear Clears all text from the shell rm Removes a file rm delete_me.txt rm -r Removes a folder with everything inside of it rm home/pi/delete_me sudo -s Elevates the terminal with administrator privilege scp (file) (directory) Copies files to another path or remote directory nohup (command) (args) Continues the command/executable even if ssh connection is lost Shortcuts Description tab Autocompletes a path or filename tab (x2) Shows all available autocompletions for a command Ctrl + C Interrupt a currently running program up/down arrow Traverse through previously entered commands"},{"location":"docs/Shortcuts/","title":"VS Code","text":"<p>Most useful shortcuts</p> Shortcut Use Ctrl + Shift + P Search all IDE functions/commands Ctrl + Shift + F Find in all files Ctrl + ` Open terminal Shift + Alt + Up/Down Duplicate line above/below Ctrl + / Comment out line Ctrl + H Find &amp; Replace"},{"location":"docs/Starting%20Dan%20Marina/","title":"Dan Marina","text":"<p>TODO</p>"},{"location":"docs/Starting%20DragonForce%2065/","title":"Mini Boat","text":"<p>Step-by-step process for how to set up our mini boat.</p>"},{"location":"docs/Starting%20DragonForce%2065/#resources","title":"Resources","text":"<ul> <li>Rigging Instructions</li> <li>Parts</li> <li></li> </ul> <p>Relevant FS-IA6B Controls:</p> <ul> <li> <p>CH1: Right Analog X (Rudder)</p> </li> <li> <p>CH2: Right Analog Y</p> </li> <li> <p>CH3: Left Analog Y (Sail)</p> </li> <li> <p>CH4: (Physical pin is borked)</p> </li> <li> <p>CH5: None?</p> </li> <li> <p>CH6: Front Right Switch 1</p> </li> </ul>"},{"location":"docs/Starting%20DragonForce%2065/#about-the-boat","title":"About the Boat","text":""},{"location":"docs/Starting%20DragonForce%2065/#set-up","title":"Set Up","text":"<ol> <li>Plug the Power and GND into V+ and GND on the FS-IA6B Receiver</li> <li>Plug the sail into CH3 (SIGNAL facing up)</li> <li>Plug the rudder into CH1 (SIGNAL facing up)</li> </ol>"},{"location":"docs/Starting%20She%20Got%20the%20Kids/","title":"She Got the Kids","text":"<p>Step-by-step process for how to set up all the electronics and software to run the boat.</p>"},{"location":"docs/Starting%20She%20Got%20the%20Kids/#connecting-the-peripherals","title":"Connecting the Peripherals","text":"<p>Before plugging in the batteries ensure the following are plugged in:</p> <p>IMPORTANT: Do not hot plug anything on the PCB, if you want to plug something in you MUST cut power</p> <ol> <li>Connect the two <code>Motor Encoder Wires</code> (labeled M1 and M0) to the corresponding pin headers on the Odrive. The black wire should line up with the GND pin. The 3.3V pin for each encoder is unused. </li> <li>Connect the two sets of 3-wire <code>Sail &amp; Rudder Motor Wires</code> from each corresponding motor to the <code>Sail Motor</code> and <code>Rudder Motor</code> female bullet connectors on the PCB.</li> </ol> <p></p> <ol> <li>Plug the USB-C cable from the mast. This plug should have a silver <code>T</code> facing up (the top side of the PCB is where the Odrive is).</li> <li>Plug the other end of the USB-C cable into the crows nest at the top of the mast. the USB-C cable also has a <code>T</code> marked on it here, this time the <code>T</code> should face the 3D print, you should be able to see the black side of the USB-C but not the side with the silver <code>T</code>.</li> <li>Plug in the Wi-Fi router to the USB port on the PCB directly next to the USB-C port where the mast is plugged in. Do not plug it into the USB port on either of the Pis, and do not plug it into the USB port the Pi is plugged into.</li> <li>Connect the Pi and Teensy with a USB - USB-C cable.</li> <li>Connect the Odrive and Pi with a USB - USB cable.</li> </ol>"},{"location":"docs/Starting%20She%20Got%20the%20Kids/#powering-the-boat","title":"Powering the Boat","text":"<ol> <li>Make sure the power switch is in the <code>Off</code> position, try and move both switches together, they are taped together to make this easier. </li> <li>Plug the batteries into the BMS, match the etape colors.</li> <li>If there is nothing else to plug in you can plug the BMS output into the PCB (the lil \"| -\" plug), if you later realize there is something else you forgot to plug in you must unplug the batteries.</li> <li>Flip the PCB switch and Odrive switch. This wll power the rest of the board, including the raspberry pi.<ul> <li>You should see the 3 Blue LEDs in the top right of the PCB, as well as the green and red LEDs on the Rasp Pi come on. If not look at this guide.</li> </ul> </li> <li>Power on the Wi-Fi router</li> </ol>"},{"location":"docs/Starting%20She%20Got%20the%20Kids/#starting-the-boat","title":"Starting the Boat","text":"<ol> <li>Connect your laptop to the <code>Sailbot @Pitt Network</code> Wi-Fi access point or hotspot.<ul> <li>Password is <code>PittSailbot</code>, admin for router is <code>Sailbot</code> and can be accessed at <code>192.168.8.1</code> or <code>192.168.1.1</code></li> <li>(Optional) Make sure everything is working up to this point by following the first 3 steps in Wifi Connectivity</li> </ul> </li> <li>On your laptop open a terminal.</li> <li>SSH into the Pi using the powershell window. The command looks like this: <code>ssh &lt;user&gt;@&lt;Ip address&gt;</code><ul> <li>The following are subject to change:</li> <li>Pi5: <code>ssh sailbot@192.168.8.11</code></li> <li>Pi5: <code>ssh pi@192.168.8.12</code></li> <li>The passwords for both are <code>sailbot</code></li> <li>If the Pi isn't connected a phone hotspot or our router then you'll need to connect a monitor and keyboard to the pi.</li> </ul> </li> <li>Run the Docker container</li> </ol> <pre><code>cd ~/Sailbot\npython3 ./utils/docker.py run\n# you should now be in a docker terminal and see /workspace# to the left of your cursor, if not look for error messages\n# you can type \"exit\" to leave the docker terminal and return to your normal terminal if you need to. \n</code></pre> <ol> <li>Configure the Odrive (on the Pi connected to the Odrive). Make sure the motors are both able to spin a few complete rotations in each direction. With either option you should see a print out of the results with any errors generated. If there are any errors look here<ul> <li>Option 1: <code>odriveCalibration.py</code>. Using <code>0</code> or <code>1</code> as an argument will only calibrate the corresponding motor.</li> </ul> </li> </ol> <pre><code>cd ~/Sailbot\npython3 ./utils/odriveCalibration.py\n</code></pre> <ul> <li>Option 2: <code>odrivetool</code></li> </ul> <pre><code>odrivetool\n # run the following commands in the odrivetool cli \nodrv0.clear_errors()\nodrv0.axis0.requested_state = AXIS_STATE_FULL_CALIBRATION_SEQUENCE\nodrv0.axis1.requested_state = AXIS_STATE_FULL_CALIBRATION_SEQUENCE\ndump_errors(odrv0)\n # type quit() to leave the cli\n</code></pre> <ol> <li>Start the boat core using the following commands. This will launch the minimum necessary ROS nodes to run RC.<ul> <li>Whenever the code is changed, make sure to run <code>. compileDocker.sh</code> again</li> <li>Available ROS2 nodes can be found in <code>setup.py:entry_points</code> and launch files can be found in <code>/launch</code></li> </ul> </li> </ol> <pre><code># The following commands should be in the docker terminal\n. compileDocker.sh\nros2 launch sailbot boat_all.launch.py\n</code></pre> <ol> <li>Turn on the RC controller. You should now be able to control the rudder and sail using the controller.<ul> <li>Adjust the offsets of the sail/rudder by flipping the sail/rudder offset switch. Then, adjust the potentiometer to adjust the zero point.</li> </ul> </li> </ol>"},{"location":"docs/Starting%20She%20Got%20the%20Kids/#connecting-to-the-site","title":"Connecting to the Site","text":"<ol> <li>Connect to Pi5 (<code>192.168.8.11</code> or <code>192.168.8.12</code>)</li> </ol> <pre><code>cd Sailbot\npython3 ./Utils/docker.py run\n. compileDocker.sh\nros2 run sailbot website\n</code></pre> <ol> <li>Connect to https://192.168.8.11:5001</li> </ol>"},{"location":"docs/Starting%20She%20Got%20the%20Kids/#rewiring-devices","title":"Rewiring Devices","text":"<p>Not necessary for startup. Only if swapping components.</p>"},{"location":"docs/Starting%20She%20Got%20the%20Kids/#compass","title":"Compass","text":"<ol> <li>Look for this and connect the SCL, SDA, GND, and 3V3 pins to the pi.<ul> <li>To confirm its connected, run <code>i2cdetect -y 1</code> and look for a device on 0x1e</li> </ul> </li> </ol>"},{"location":"docs/Starting%20She%20Got%20the%20Kids/#windvane","title":"Windvane","text":"<ol> <li>Thread the 6-pin header cable through the mast</li> <li>At the top of the mast, connect the 6-pin header to the windvane</li> <li>Connect the header to the rotary encoder on the PCB, matching the direction</li> </ol>"},{"location":"docs/Starting%20She%20Got%20the%20Kids/#charging-batteries","title":"Charging Batteries","text":"<ol> <li>Turn on the variable power supply and set to 12.6 volts</li> <li>Turn off the power supply, then connect alligator clips between the power supply and the batteries (check polarity)</li> <li>Charge until current starts to drop</li> </ol>"},{"location":"docs/Starting%20She%20Got%20the%20Kids/#starting-events","title":"Starting Events","text":"<ol> <li>ros2 launch sailbot event</li> </ol>"},{"location":"docs/Troubleshooting/","title":"Problems We've Encountered &amp; How to Solve Them","text":""},{"location":"docs/Troubleshooting/#no-power-on-pcb","title":"No Power on PCB","text":"<p>Issue: The batteries are plugged in but nothing is on</p>"},{"location":"docs/Troubleshooting/#check-the-battery-voltage","title":"Check the battery voltage","text":"<p>The voltage of the plug connecting to the PCB should be greater than 10.8V. If it's lower, the Battery Management System (BMS) could be preventing usage to avoid damage. Charge or replace the batteries.</p>"},{"location":"docs/Troubleshooting/#check-the-deans-plugs","title":"Check the Deans plugs","text":"<ul> <li>Some Deans plugs do not fit properly, causing poor connections.  </li> <li>Directly plugging the battery into the PCB may not work\u2014try using jumper wires instead.  </li> <li>\u26a0\ufe0f BE VERY CAREFUL! </li> <li>Swapping the Ground and V+ wires could destroy the PCB.  </li> <li>Accidentally shorting the battery terminals could destroy the battery.  </li> </ul>"},{"location":"docs/Troubleshooting/#check-the-fuses","title":"Check the Fuses","text":"<p>If there's overly high current on the PCB at any time then the fuses will blow, disconnecting power from part of the board - Visually inspect the wire inside the fuse, it should be intact and connecting both sides of the fuse - Try a continuity test (wifi signal) using the multimeter, you should hear a beep if they are connected</p>"},{"location":"docs/Troubleshooting/#wi-fi-connectivity","title":"Wi-Fi Connectivity","text":"<p>Issue: Unable to connect to the <code>Pitt Sailbot</code> Wi-Fi network. Or the Pi is not connected to the router.</p> <ol> <li> <p>Ensure the Wi-Fi router is running    - The router should have a green light indicating Wi-Fi signal.  </p> </li> <li> <p>Check your connection    - Make sure your device is connected to <code>Pitt Sailbot</code>.  </p> </li> <li> <p>Verify router access    - Open a browser and enter <code>192.168.8.1</code> in the address bar.    - Password: <code>sailboot</code>    - Click on the Clients tab to check connected devices.    - Your device should be listed along with the Raspberry Pi(s) and their IP addresses.  </p> </li> <li> <p>If the Pi is missing from the client list:    - Unplug the Pi\u2019s power cable from the PCB (do not turn off the entire PCB).    - Do NOT unplug the GPIO cable (wide black cable).    - Wait a few moments, then plug the Pi back in.  </p> </li> <li> <p>Check Pi status:    - Green light blinking (or steady) = Pi is running.    - Only red light = Possible Pi issue.    - No light at all = The Pi may not be receiving power.  </p> </li> <li> <p>Wait &amp; retry:    - Sometimes, it takes a minute or two for the Pi to appear at <code>192.168.8.1</code>.  </p> </li> </ol>"},{"location":"docs/Troubleshooting/#odrive-setup","title":"ODrive Setup","text":"<p>Issue: Errors during calibration.  </p>"},{"location":"docs/Troubleshooting/#unbalanced-phases","title":"Unbalanced Phases","text":"<ol> <li>Swap the three motor wires (on the motor side) to different female connectors. Hot-swapping these wires is safe ONLY IF:  <ol> <li>The calibration sequence failed for that axis.  </li> <li>You haven't reset the axis using <code>odrv0.clear_errors()</code>.  </li> </ol> </li> <li>Rerun the calibration after each attempt until error is resolved.</li> </ol>"},{"location":"docs/Troubleshooting/#encoder-cpr-mismatch","title":"Encoder CPR Mismatch","text":"<ol> <li>Ensure the encoder wires are fully plugged in.  </li> <li>Check that the encoder is firmly attached to the motor.  </li> <li>Spin the motor to check for excessive resistance (apply WD-40 if needed).  </li> <li>Rerun the calibration.  </li> </ol>"},{"location":"docs/Troubleshooting/#servos","title":"Servos","text":"<p>Servo's don't move or move erratically 1. Try manually blasting PWM with script 2. Check voltage (servos usually cut out &lt;3V)    - Our servos cut out ~3V but usually need 4.8V+    - Is the wire long? Check closest to the source of the servo due to voltage drop 3. Check if the microcontroller has the same ground as the servo (short servo and microcontroller GND) 4. Check PWM on oscilloscope 5. Check if the servo has enough power    - The Adafruit Servo Driver is too weak to power the rudder, but can power the sail/jib      - If so, plug into main PCB 6. Try another servo</p>"},{"location":"docs/Troubleshooting/#docker","title":"Docker","text":"<p>Issue: ROS2 <code>colcon build</code> fails.  </p> <ul> <li><code>docker.py create</code> might be copying over <code>venv</code> files, leading to unrelated package issues?</li> </ul>"},{"location":"docs/Troubleshooting/#no-rc-control","title":"No RC Control","text":"<p>Issue: The RC controller fails to control the boat</p> <p>The process for receiving and executing RC is as follows:</p> <ol> <li>RC Controller \u2192 Wirelessly signals to Receiver in the Mast.  </li> <li>Receiver \u2192 Sends data to Teensy over Serial using the mast USB-C (<code>transceiver.cpp</code>).  </li> <li>Teensy \u2192 Publishes controller state to Pi (<code>main.cpp</code>).  </li> <li>Pi \u2192 Publishes controller state to various topics (<code>transceiver.py</code>), e.g., <code>cmd_rudder</code> &amp; <code>cmd_sail</code>.  </li> <li><code>motordrivers.py</code> \u2192 Subscribes to topics and sets position using <code>odrive.py</code>.  </li> </ol>"},{"location":"docs/Troubleshooting/#check-receiver-led","title":"Check Receiver LED","text":"<ul> <li>Solid blue light = Normal.  </li> <li>Blue with flashing red = Controller is off or incorrectly bound.  </li> <li>No LED light = Check if the USB-C is plugged into both ends of the mast.  </li> </ul>"},{"location":"docs/Troubleshooting/#force-publish-to-cmd_rudder-cmd_sail","title":"Force Publish to <code>cmd_rudder</code> / <code>cmd_sail</code>","text":"<p>Try manually publishing a command in the Pi terminal:  </p> <pre><code>ros2 topic pub --once boat/cmd_rudder std_msgs/Float32 \"{data: 30.0}\"\n</code></pre> <p>If nothing happens, ensure the ODrive is calibrated.</p>"},{"location":"docs/Troubleshooting/#check-teensy-output-transceiverpy","title":"Check Teensy Output &amp; <code>transceiver.py</code>","text":"<p>Ensure Teensy is publishing and <code>transceiver.py</code> is receiving the data correctly.</p>"},{"location":"docs/Troubleshooting/#swap-out-usb-c-cable","title":"Swap out USB-C Cable","text":"<p>Try flipping the mast cable or replacing with a different USB-C gen 3.2 cable.</p>"},{"location":"docs/Troubleshooting/#boat-suddenly-loses-rc-on-water","title":"Boat Suddenly Loses RC on Water","text":"<p>Issue: RC connection drops when the boat leaves Wi-Fi range or laptop goes to sleep.</p> <p>Having the boat code running on an open-terminal and exiting wifi-range causes the boat to stop.</p>"},{"location":"docs/Troubleshooting/#manually-kill-the-terminal-before-restarting-the-boat-code","title":"Manually kill the terminal before restarting the boat code","text":"<ol> <li>Run the boat code as stated in Starting the Boat</li> </ol> <ul> <li>Also try running the commands with <code>nohup</code></li> </ul> <ol> <li>Close out the terminal on the host side</li> </ol>"},{"location":"docs/Troubleshooting/#cant-connect-to-sailnet-website","title":"Can't Connect to SailNet Website","text":"<p>Issue: Unable to access the Pi-hosted site.</p>"},{"location":"docs/Troubleshooting/#ensure-you-are-on-the-same-network-as-the-pi","title":"Ensure you are on the same network as the Pi","text":"<p>Do not use a mobile hotspot (especially Android, which has client isolation enabled by default). If using a hotspot, check if client isolation can be disabled.</p>"},{"location":"docs/Troubleshooting/#try-accessing-the-site-locally-from-the-pi","title":"Try accessing the site locally from the Pi","text":""},{"location":"docs/Troubleshooting/#pico-2-usb-device-malfunctioned","title":"Pico 2 USB Device Malfunctioned","text":"<p>This usually happens when your code causes the Pico 2 to crash during runtime. 1. Hold the BOOTSEL button and then plug into the USB-A port 2. Reflash with 'bare-bones' code to determine the source</p>"},{"location":"docs/Troubleshooting/#pico-2-doesnt-flash","title":"Pico 2 doesn't flash","text":"<p>Unfortunately this is a relatively common issue. Windows drivers are very inconsistent. 1. Check Device Manager for 'RP2350 Boot' under Ports    - If it is not there, check that the micro-usb cable supports data and that the pico 2 isn't fried 2. Make sure the Pico 2 drivers are set to WinUSB with Zadig 3. On Windows uninstall every RP2350 Boot or Pico2 driver   a. Open Device Manager   b. View &gt; Devices By Driver   c. Scan through the list and uninstall every RP2350 Boot or Pico 2 related driver (there may be multiple) 4. Replug the device, it should open as Mass Storage (usb) 5. Reinstall the Zadig WinUSB driver    - Make sure you install to RP2350 (Boot Interface 1) ONLY</p>"}]}